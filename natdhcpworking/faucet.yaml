vlans:
  office:
    vid: 100
    faucet_mac: "0e:00:00:00:10:01"
    faucet_vips: ["10.0.10.254/24"]
    routes:
      - route:
          ip_dst: "0.0.0.0/0"
          ip_gw: "10.0.30.1"
      - route:
          ip_dst: "0.0.0.0/0"
          ip_gw: "10.0.30.2"

  guest:
    vid: 200
    faucet_mac: "0e:00:00:00:20:01"
    faucet_vips: ["10.0.20.254/24"]
    routes:
      - route:
          ip_dst: "0.0.0.0/0"
          ip_gw: "10.0.30.1"
      - route:
          ip_dst: "0.0.0.0/0"
          ip_gw: "10.0.30.2"

  management:
    vid: 300
    faucet_mac: "0e:00:00:00:30:01"
    faucet_vips: ["10.0.30.254/24"]
    routes:
      - route:
          ip_dst: "0.0.0.0/0"
          ip_gw: "10.0.30.1"
      - route:
          ip_dst: "0.0.0.0/0"
          ip_gw: "10.0.30.2"

routers:
  rtr:
    vlans: [office, guest, management]

dps:
  sA1:
    dp_id: 0x1
    hardware: "Open vSwitch"
    stack: { priority: 1 }
    interfaces:
      1: { name: "hA1v1", native_vlan: office }
      2: { name: "hA1v2", native_vlan: guest }
      3: { name: "hA1v3", native_vlan: management }

      100: { name: "dhcp10", native_vlan: office }
      200: { name: "dhcp20", native_vlan: guest }
      300: { name: "dhcp30", native_vlan: management }
      23: { name: "to sB1", stack: { dp: sB1, port: 24 } }
      24: { name: "natA", native_vlan: management }
      25: { name: "to sA2", stack: { dp: sA2, port: 24 } }

  sA2:
    dp_id: 0x2
    hardware: "Open vSwitch"
    stack: { priority: 0 }
    interfaces:
      1: { name: "hA2v1", native_vlan: office }
      2: { name: "hA2v2", native_vlan: guest }
      3: { name: "hA2v3", native_vlan: management }

      24: { name: "to sA1", stack: { dp: sA1, port: 25 } }

  sB1:
    dp_id: 0x3
    hardware: "Open vSwitch"
    interfaces:
      1: { name: "hB1v1", native_vlan: office }
      2: { name: "hB1v2", native_vlan: guest }
      3: { name: "hB1v3", native_vlan: management }

      20: { name: "natB", native_vlan: management }
      21: { name: "to sB3", stack: { dp: sB3, port: 24 } }
      22: { name: "to sB2", stack: { dp: sB2, port: 24 } }

      24: { name: "to sA1", stack: { dp: sA1, port: 23 } }

  sB2:
    dp_id: 0x4
    hardware: "Open vSwitch"
    interfaces:
      1: { name: "hB2v1", native_vlan: office }
      2: { name: "hB2v2", native_vlan: guest }
      3: { name: "hB2v3", native_vlan: management }

      24: { name: "to sB1", stack: { dp: sB1, port: 22 } }

  sB3:
    dp_id: 0x5
    hardware: "Open vSwitch"
    interfaces:
      1: { name: "hB3v1", native_vlan: office }
      2: { name: "hB3v2", native_vlan: guest }
      3: { name: "hB3v3", native_vlan: management }

      24: { name: "to sB1", stack: { dp: sB1, port: 21 } }